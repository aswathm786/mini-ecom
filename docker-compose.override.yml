version: '3.8'

# Development overrides
# This file is automatically used by docker-compose for development
# Use: docker-compose up (automatically includes this file)
# For production: docker-compose -f docker-compose.yml -f docker-compose.prod.yml up

services:
  # Backend API (Development with live reload)
  api:
    volumes:
      - ./backend/src:/app/src:cached
      - ./backend/dist:/app/dist:cached
      - ./backend/migrations:/app/migrations:ro
      - ./backend/scripts:/app/scripts:ro
      - ./backend/node_modules:/app/node_modules
    environment:
      NODE_ENV: development
    command: sh -c "cd /app && npm install && npm run dev"

  # Frontend (Development with live reload)
  frontend:
    volumes:
      - ./frontend:/app:cached
      - ./frontend/node_modules:/app/node_modules
    environment:
      - NODE_ENV=development
    command: sh -c "cd /app && npm install && npm run dev -- --host 0.0.0.0 --port 80"

